(function(e){window.Line=e()})(function(){function e(c,a,f,h,d){$.ajax({crossDomain:!0,cashe:!1,type:c,contentType:"application/json; charset=utf-8",data:JSON.stringify(f),url:a}).done(h).fail(d)}var g=null;firebase.initializeApp(firebaseConfig);firebase.auth().setPersistence(firebase.auth.Auth.Persistence.NONE);var k=(Math.random()*Date.now()*Math.pow(10,5)).toString(16);Cookies.set("csrfToken",k,{expires:1,secure:!0});return function(){function c(){}c.hello=function(){return"Hello from Line"};c.auth=
function(){function a(){}a.signInWithGoogleAuth=function(){return new Promise(function(f,a){var d=new firebase.auth.GoogleAuthProvider;firebase.auth().signInWithPopup(d).then(function(b){console.log("=== user: ",b.user);g=b.user;return b.user.getIdToken()}).then(function(b){console.log("=== user trying sign-in: ",b);var d=Cookies.get("csrfToken");console.log("=== csrfToken: ",d);e("POST","/auth/signin",{idToken:b,csrfToken:d},f,a)})["catch"](function(b){reject(b)})})};a.signUpWithGoogleAuth=function(a,
c){return new Promise(function(d,b){e("POST","/auth/signup",{provider:a,userId:c},d,b)})};a.signInWithEmailPassword=function(a){return new Promise(function(c,d){firebase.auth().signInWithEmailAndPassword(a.email,a.password).then(function(b){console.log("=== user: ",b.user);g=b.user;return b.user.getIdToken()}).then(function(b){console.log("=== user trying sign-in: ",b);var a=Cookies.get("csrfToken");console.log("=== csrfToken: ",a);e("POST","/auth/signin",{idToken:b,csrfToken:a},c,d)})["catch"](function(b){console.log("=== err: ",
b);d(b)})})};a.signUpWithEmailPassword=function(a){return new Promise(function(c,d){firebase.auth().createUserWithEmailAndPassword(a.email,a.password).then(function(a){console.log("=== user: ",a.user);e("POST","/auth/signup",{provider:"google",userId:a.user.uid},c,d)})["catch"](function(a){d(a)})})};return a};c.view=function(){function a(){}a.getBlock=function(a){return new Promise(function(c,d){e("GET",a,{},c,d)})};return a};c.signOut=function(){return new Promise(function(a,c){e("POST","/auth/signout",
{},a,c)})};c.redirect=function(a){window.location.assign(a)};c.getUserId=function(){return g.uid};return c}()});